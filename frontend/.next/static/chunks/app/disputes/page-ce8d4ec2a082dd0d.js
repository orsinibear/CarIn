(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2110],{83183:function(e,t,n){Promise.resolve().then(n.bind(n,75295))},75295:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n(57437),s=n(2265),r=n(21843),a=n(54506),o=n(80432);function d(e){let{isResolved:t,refundApproved:n,resolutionType:s,refundPercentage:r}=e;if(t){if(n){let e=void 0!==r?Number(r):100;return(0,i.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:["Resolved - ",e,"% Refund Approved"]})}return(0,i.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:"Resolved - Refund Denied"})}switch(s){case o.Jm.Automated:return(0,i.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Automated Review"});case o.Jm.PendingVote:return(0,i.jsx)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Pending Vote"});case o.Jm.Manual:return(0,i.jsx)("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:"Manual Review"});default:return(0,i.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:"Unknown"})}}function u(e){let{dispute:t,onClick:n}=e;return(0,i.jsxs)("div",{onClick:n,className:"p-6 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer ".concat(n?"cursor-pointer":""),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Dispute #",t.disputeId.toString()]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Booking #",t.bookingId.toString()," • Escrow #",t.escrowId.toString()]})]}),(0,i.jsx)(d,{isResolved:t.isResolved,refundApproved:t.isResolved?t.refundApproved:null,resolutionType:t.resolutionType,refundPercentage:t.refundPercentage})]}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("p",{className:"text-gray-700 line-clamp-2",children:t.reason})}),(0,i.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:["Filed by: ",(0,i.jsxs)("span",{className:"font-medium",children:[t.filedBy.slice(0,6),"...",t.filedBy.slice(-4)]})]}),(0,i.jsxs)("p",{className:"mt-1",children:["Filed ",(0,a.Z)(new Date(1e3*Number(t.filedAt)),{addSuffix:!0})]})]}),t.isResolved&&t.resolvedAt>0n&&(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"font-medium",children:"Resolved"}),(0,i.jsx)("p",{className:"text-xs mt-1",children:(0,a.Z)(new Date(1e3*Number(t.resolvedAt)),{addSuffix:!0})})]})]})]})}var l=n(44005);function c(e){let{escrowIds:t}=e,{address:n}=(0,r.R)(),a=(0,l.x)(),[d,c]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),x=44787===a?o.$Y.alfajores:o.$Y.celo;if((0,s.useEffect)(()=>{(async()=>{if(!n||!x){h(!1);return}h(!0);try{c([])}catch(e){console.error("Error loading disputes:",e)}finally{h(!1)}})()},[n,x]),m)return(0,i.jsx)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:(0,i.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,i.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),(0,i.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,i.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})});if(0===d.length)return(0,i.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dispute History"}),(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("p",{className:"text-gray-600",children:"No disputes found"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Disputes you file or are involved in will appear here"})]})]});let g=d.filter(e=>!e.isResolved),b=d.filter(e=>e.isResolved);return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Dispute History"}),(0,i.jsxs)("div",{className:"text-sm text-gray-600",children:[g.length," active, ",b.length," resolved"]})]}),g.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Active Disputes"}),(0,i.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,i.jsx)(u,{dispute:e,onClick:()=>f(e)},e.disputeId.toString()))})]}),b.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Resolved Disputes"}),(0,i.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,i.jsx)(u,{dispute:e,onClick:()=>f(e)},e.disputeId.toString()))})]}),p&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-xl font-bold",children:"Dispute Details"}),(0,i.jsx)("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,i.jsx)(u,{dispute:p})]})})]})}var m=n(80014),h=n(8517),p=n(2398);function f(e){let{escrowId:t,bookingId:n,onSuccess:a,onCancel:o}=e,{address:d}=(0,r.R)(),{fileDispute:u,hash:l,isPending:c}=(0,m.nz)(),[f,x]=(0,s.useState)(""),[g,b]=(0,s.useState)(h.kq.Other),[v,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(""),[w,I]=(0,s.useState)(!1),[k,D]=(0,s.useState)(null),{isLoading:C,isSuccess:S}=(0,p.A)({hash:l}),R=async e=>{if(e.preventDefault(),D(null),!d){D("Please connect your wallet");return}if(!f.trim()){D("Please provide a reason for the dispute");return}try{let e="0x0000000000000000000000000000000000000000000000000000000000000000";if(v){I(!0);let t=await (0,h.O_)(v,g);e=(0,h.VO)(t),I(!1)}else(g===h.kq.CheckInTimestamp||g===h.kq.CheckOutTimestamp)&&(e="0x"+BigInt(Math.floor(Date.now()/1e3)).toString(16).padStart(64,"0"));await u(t,n,f,e,g)}catch(e){D(e.message||"Failed to file dispute"),I(!1)}};return S?(0,i.jsxs)("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Dispute Filed Successfully"}),(0,i.jsx)("p",{className:"text-green-700",children:"Your dispute has been filed and is being reviewed."}),a&&(0,i.jsx)("button",{onClick:()=>a(BigInt(0)),className:"mt-4 text-green-600 underline",children:"View Dispute"})]}):(0,i.jsxs)("form",{onSubmit:R,className:"space-y-6 p-6 bg-white rounded-lg shadow-md",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"File a Dispute"}),k&&(0,i.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,i.jsx)("p",{className:"text-red-800",children:k})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for Dispute ",(0,i.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,i.jsx)("textarea",{id:"reason",value:f,onChange:e=>x(e.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the issue with this booking...",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"evidenceType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Evidence Type"}),(0,i.jsx)("select",{id:"evidenceType",value:g,onChange:e=>b(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.values(h.kq).filter(e=>!isNaN(Number(e))).map(e=>(0,i.jsx)("option",{value:e,children:(0,h.gJ)(Number(e))},e))})]}),(g===h.kq.Image||g===h.kq.Video||g===h.kq.Document)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"evidenceFile",className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Evidence"}),(0,i.jsx)("input",{id:"evidenceFile",type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0],n=(0,h.mC)(g,t,j);if(!n.valid){D(n.error||"Invalid evidence");return}y(t),D(null)}},accept:g===h.kq.Image?"image/*":g===h.kq.Video?"video/*":"application/pdf,application/msword,.doc,.docx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),v&&(0,i.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",v.name," (",(v.size/1024/1024).toFixed(2)," MB)"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"evidenceDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Evidence Description"}),(0,i.jsx)("textarea",{id:"evidenceDescription",value:j,onChange:e=>N(e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what this evidence shows..."})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{type:"submit",disabled:c||C||w||!d,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium",children:w?"Uploading Evidence...":c||C?"Filing Dispute...":"File Dispute"}),o&&(0,i.jsx)("button",{type:"button",onClick:o,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})}function x(){let{address:e,isConnected:t}=(0,r.R)(),[n,a]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),[u,l]=(0,s.useState)(null);return t?(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Dispute Resolution"}),(0,i.jsx)("button",{onClick:()=>a(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"File New Dispute"})]}),n&&(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Escrow ID"}),(0,i.jsx)("input",{type:"number",placeholder:"Enter escrow ID",onChange:e=>d(e.target.value?BigInt(e.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking ID"}),(0,i.jsx)("input",{type:"number",placeholder:"Enter booking ID",onChange:e=>l(e.target.value?BigInt(e.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),o&&u&&(0,i.jsx)(f,{escrowId:o,bookingId:u,onSuccess:()=>{a(!1),d(null),l(null)},onCancel:()=>{a(!1),d(null),l(null)}})]}),(0,i.jsx)(c,{})]})}):(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,i.jsxs)("div",{className:"p-6 bg-yellow-50 border border-yellow-200 rounded-lg text-center",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Wallet Not Connected"}),(0,i.jsx)("p",{className:"text-yellow-700",children:"Please connect your wallet to view and file disputes."})]})})})}},80432:function(e,t,n){"use strict";n.d(t,{$Y:function(){return o},Jm:function(){return s},aT:function(){return a}});var i,s,r=n(40257);let a=["event DisputeFiled(uint256 indexed disputeId, uint256 indexed escrowId, uint256 indexed bookingId, address filedBy, address opposingParty, string reason, uint8 resolutionType)","event EvidenceSubmitted(uint256 indexed evidenceId, uint256 indexed disputeId, address submittedBy, uint8 evidenceType, bytes evidenceHash)","event CheckInRecorded(uint256 indexed bookingId, uint256 checkInTime, address verifiedBy)","event CheckOutRecorded(uint256 indexed bookingId, uint256 checkOutTime, address verifiedBy)","event AutomatedResolution(uint256 indexed disputeId, bool refundApproved, uint256 refundPercentage, string reason)","event VoteSubmitted(uint256 indexed disputeId, address indexed voter, bool supportsRefund, uint256 weight)","event DisputeResolved(uint256 indexed disputeId, address resolvedBy, bool refundApproved, uint256 refundPercentage, uint8 resolutionType)","function fileDispute(uint256 escrowId, uint256 bookingId, string memory reason, bytes memory evidenceHash, uint8 evidenceType) external returns (uint256)","function submitEvidence(uint256 disputeId, uint8 evidenceType, bytes memory evidenceHash, string memory description) external","function recordCheckIn(uint256 bookingId, uint256 checkInTime) external","function recordCheckOut(uint256 bookingId, uint256 checkOutTime) external","function submitVote(uint256 disputeId, bool supportsRefund, uint256 refundPercentage, string memory justification) external","function resolveDisputeManually(uint256 disputeId, bool refundApproved, uint256 refundPercentage) external","function getDispute(uint256 disputeId) external view returns (tuple(uint256 disputeId, uint256 escrowId, uint256 bookingId, address filedBy, address opposingParty, string reason, bytes primaryEvidenceHash, uint256 filedAt, uint8 resolutionType, bool isResolved, address resolvedBy, uint256 resolvedAt, bool refundApproved, uint256 refundPercentage))","function getDisputeEvidence(uint256 disputeId) external view returns (tuple(uint256 evidenceId, uint256 disputeId, address submittedBy, uint8 evidenceType, bytes evidenceHash, uint256 timestamp, string description)[])","function getCheckInData(uint256 bookingId) external view returns (tuple(uint256 bookingId, uint256 checkInTime, uint256 checkOutTime, bool checkedIn, bool checkedOut, address verifiedBy))","function getDisputeVotes(uint256 disputeId) external view returns (tuple(address voter, bool supportsRefund, uint256 weight, uint256 timestamp, string justification)[])","function getDisputeByEscrowId(uint256 escrowId) external view returns (tuple(uint256 disputeId, uint256 escrowId, uint256 bookingId, address filedBy, address opposingParty, string reason, bytes primaryEvidenceHash, uint256 filedAt, uint8 resolutionType, bool isResolved, address resolvedBy, uint256 resolvedAt, bool refundApproved, uint256 refundPercentage))"],o={alfajores:r.env.NEXT_PUBLIC_DISPUTE_RESOLUTION_ADDRESS_ALFAJORES||"",celo:r.env.NEXT_PUBLIC_DISPUTE_RESOLUTION_ADDRESS_CELO||""};(i=s||(s={}))[i.Automated=0]="Automated",i[i.PendingVote=1]="PendingVote",i[i.Manual=2]="Manual"},80014:function(e,t,n){"use strict";n.d(t,{$I:function(){return u},Cz:function(){return c},bC:function(){return l},nz:function(){return d}});var i=n(21843),s=n(6115),r=n(89416),a=n(80432),o=n(44005);function d(){let{address:e}=(0,i.R)(),t=(0,o.x)(),{writeContract:n,data:r,isPending:d,error:u}=(0,s.S)(),l=44787===t?a.$Y.alfajores:a.$Y.celo;return{fileDispute:async(e,t,i,s,r)=>n({address:l,abi:a.aT,functionName:"fileDispute",args:[e,t,i,s,r]}),submitEvidence:async(e,t,i,s)=>n({address:l,abi:a.aT,functionName:"submitEvidence",args:[e,t,i,s]}),recordCheckIn:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(Math.floor(Date.now()/1e3));return n({address:l,abi:a.aT,functionName:"recordCheckIn",args:[e,t]})},recordCheckOut:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(Math.floor(Date.now()/1e3));return n({address:l,abi:a.aT,functionName:"recordCheckOut",args:[e,t]})},submitVote:async(e,t,i,s)=>n({address:l,abi:a.aT,functionName:"submitVote",args:[e,t,i,s]}),resolveDisputeManually:async(e,t,i)=>n({address:l,abi:a.aT,functionName:"resolveDisputeManually",args:[e,t,i]}),hash:r,isPending:d,error:u}}function u(e){let t=44787===(0,o.x)()?a.$Y.alfajores:a.$Y.celo,{data:n,isLoading:i,error:s}=(0,r.u)({address:t,abi:a.aT,functionName:"getDispute",args:e?[e]:void 0,query:{enabled:!!e}});return{dispute:n,isLoading:i,error:s}}function l(e){let t=44787===(0,o.x)()?a.$Y.alfajores:a.$Y.celo,{data:n,isLoading:i,error:s}=(0,r.u)({address:t,abi:a.aT,functionName:"getDisputeEvidence",args:e?[e]:void 0,query:{enabled:!!e}});return{evidence:n,isLoading:i,error:s}}function c(e){let t=44787===(0,o.x)()?a.$Y.alfajores:a.$Y.celo,{data:n,isLoading:i,error:s}=(0,r.u)({address:t,abi:a.aT,functionName:"getDisputeVotes",args:e?[e]:void 0,query:{enabled:!!e}});return{votes:n,isLoading:i,error:s}}},8517:function(e,t,n){"use strict";n.d(t,{O_:function(){return o},VO:function(){return d},gJ:function(){return c},k8:function(){return u},kq:function(){return s},mC:function(){return l}});var i,s,r=n(82957).lW,a=n(40257);async function o(e,t){let n=new FormData;n.append("file",e);try{let e=await fetch("/api/ipfs/upload",{method:"POST",body:n});if(!e.ok)throw Error("Failed to upload to IPFS");return(await e.json()).hash}catch(e){throw console.error("IPFS upload error:",e),e}}function d(e){return"0x"+r.from(e).toString("hex").slice(0,64)}function u(e){let t=a.env.NEXT_PUBLIC_IPFS_GATEWAY||"https://ipfs.io/ipfs/";return"".concat(t).concat(e)}function l(e,t,n){if(!n||0===n.trim().length)return{valid:!1,error:"Evidence description is required"};if(2===e||3===e||4===e){if(!t)return{valid:!1,error:"File is required for this evidence type"};if(t.size>10485760)return{valid:!1,error:"File size exceeds 10MB limit"};if(2===e&&t.type.startsWith("image/")&&!["image/jpeg","image/png","image/webp","image/gif"].includes(t.type))return{valid:!1,error:"Invalid image format. Allowed: JPEG, PNG, WebP, GIF"};if(3===e&&t.type.startsWith("video/")&&!["video/mp4","video/webm","video/quicktime"].includes(t.type))return{valid:!1,error:"Invalid video format. Allowed: MP4, WebM, QuickTime"}}return{valid:!0}}function c(e){return({0:"Check-in Timestamp",1:"Check-out Timestamp",2:"Image",3:"Video",4:"Document",5:"Location Data",6:"Other"})[e]||"Unknown"}(i=s||(s={}))[i.CheckInTimestamp=0]="CheckInTimestamp",i[i.CheckOutTimestamp=1]="CheckOutTimestamp",i[i.Image=2]="Image",i[i.Video=3]="Video",i[i.Document=4]="Document",i[i.LocationData=5]="LocationData",i[i.Other=6]="Other"},28766:function(e,t,n){"use strict";n.d(t,{L:function(){return d}});var i=n(65436),s=n(17283),r=n(34180),a=n(82645),o=n(50550);async function d(e,t){let{abi:n,address:d,args:u,functionName:l,...c}=t,m=(0,s.R)({abi:n,args:u,functionName:l});try{let{data:t}=await (0,a.s)(e,o.R,"call")({...c,data:m,to:d});return(0,i.k)({abi:n,args:u,functionName:l,data:t||"0x"})}catch(e){throw(0,r.S)(e,{abi:n,address:d,args:u,docsPath:"/docs/contract/readContract",functionName:l})}}},89416:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var i=n(28766),s=n(44199),r=n(27534),a=n(97074),o=n(44005),d=n(12364);function u(){var e,t,n;let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{abi:l,address:c,functionName:m,query:h={}}=u,p=u.code,f=(0,d.Z)(u),x=(0,o.x)({config:f}),g=function(e,t={}){return{async queryFn({queryKey:n}){let r=t.abi;if(!r)throw Error("abi is required");let{functionName:a,scopeKey:o,...d}=n[1],u=(()=>{let e=n[1];if(e.address)return{address:e.address};if(e.code)return{code:e.code};throw Error("address or code is required")})();if(!a)throw Error("functionName is required");return function(e,t){let{chainId:n,...r}=t,a=e.getClient({chainId:n});return(0,s.s)(a,i.L,"readContract")(r)}(e,{abi:r,functionName:a,args:d.args,...u,...d})},queryKey:function(e={}){let{abi:t,...n}=e;return["readContract",(0,r.OP)(n)]}(t)}}(f,{...u,chainId:null!==(e=u.chainId)&&void 0!==e?e:x}),b=!!((c||p)&&l&&m&&(null===(t=h.enabled)||void 0===t||t));return(0,a.aM)({...h,...g,enabled:b,structuralSharing:null!==(n=h.structuralSharing)&&void 0!==n?n:r.if})}},2398:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var i=n(93184),s=n(27534),r=n(97074),a=n(44005),o=n(12364);function d(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{hash:d,query:u={}}=n,l=(0,o.Z)(n),c=(0,a.x)({config:l}),m=function(e,t={}){return{async queryFn({queryKey:n}){let{hash:s,...r}=n[1];if(!s)throw Error("hash is required");return(0,i.e)(e,{...r,onReplaced:t.onReplaced,hash:s})},queryKey:function(e={}){let{onReplaced:t,...n}=e;return["waitForTransactionReceipt",(0,s.OP)(n)]}(t)}}(l,{...n,chainId:null!==(e=n.chainId)&&void 0!==e?e:c}),h=!!(d&&(null===(t=u.enabled)||void 0===t||t));return(0,r.aM)({...u,...m,enabled:h})}},6115:function(e,t,n){"use strict";n.d(t,{S:function(){return m}});var i=n(2265),s=n(2894),r=n(18238),a=n(24112),o=n(45345),d=class extends a.l{#e;#t=void 0;#n;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#r()}mutate(e,t){return this.#i=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#s(){let e=this.#n?.state??(0,s.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){r.Vr.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#i.onSuccess?.(e.data,t,n,i),this.#i.onSettled?.(e.data,null,t,n,i)):e?.type==="error"&&(this.#i.onError?.(e.error,t,n,i),this.#i.onSettled?.(void 0,e.error,t,n,i))}this.listeners.forEach(e=>{e(this.#t)})})}},u=n(29827),l=n(18470),c=n(12364);function m(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e=(0,c.Z)(t),{mutationFn:t=>(0,l.n)(e,t),mutationKey:["writeContract"]}),s=function(e,t){let n=(0,u.NL)(void 0),[s]=i.useState(()=>new d(n,e));i.useEffect(()=>{s.setOptions(e)},[s,e]);let a=i.useSyncExternalStore(i.useCallback(e=>s.subscribe(r.Vr.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),l=i.useCallback((e,t)=>{s.mutate(e,t).catch(o.ZT)},[s]);if(a.error&&(0,o.L3)(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}({...t.mutation,...n});return{...s,mutate:s.mutate,mutateAsync:s.mutateAsync,writeContract:s.mutate,writeContractAsync:s.mutateAsync}}}},function(e){e.O(0,[9696,58,642,9334,7846,4506,2971,2117,1744],function(){return e(e.s=83183)}),_N_E=e.O()}]);