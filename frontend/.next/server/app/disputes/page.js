(()=>{var e={};e.id=2110,e.ids=[2110],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},85807:e=>{"use strict";e.exports=require("module")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},70612:e=>{"use strict";e.exports=require("node:os")},49411:e=>{"use strict";e.exports=require("node:path")},90022:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(3918),t(54579),t(35866);var r=t(23191),l=t(88716),i=t(37922),n=t.n(i),a=t(95231),d={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);t.d(s,d);let o=["",{children:["disputes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3918)),"C:\\Users\\MSI\\Desktop\\walletconnect\\CarIn\\frontend\\app\\disputes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,54579)),"C:\\Users\\MSI\\Desktop\\walletconnect\\CarIn\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\MSI\\Desktop\\walletconnect\\CarIn\\frontend\\app\\disputes\\page.tsx"],u="/disputes/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/disputes/page",pathname:"/disputes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},45605:(e,s,t)=>{Promise.resolve().then(t.bind(t,97636))},97636:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var r=t(10326),l=t(17577),i=t(37090),n=t(87311),a=t(30070);function d({isResolved:e,refundApproved:s,resolutionType:t,refundPercentage:l}){if(e){if(s){let e=void 0!==l?Number(l):100;return(0,r.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:["Resolved - ",e,"% Refund Approved"]})}return r.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:"Resolved - Refund Denied"})}switch(t){case a.Jm.Automated:return r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Automated Review"});case a.Jm.PendingVote:return r.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"Pending Vote"});case a.Jm.Manual:return r.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium",children:"Manual Review"});default:return r.jsx("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-medium",children:"Unknown"})}}function o({dispute:e,onClick:s}){return(0,r.jsxs)("div",{onClick:s,className:`p-6 bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer ${s?"cursor-pointer":""}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Dispute #",e.disputeId.toString()]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Booking #",e.bookingId.toString()," • Escrow #",e.escrowId.toString()]})]}),r.jsx(d,{isResolved:e.isResolved,refundApproved:e.isResolved?e.refundApproved:null,resolutionType:e.resolutionType,refundPercentage:e.refundPercentage})]}),r.jsx("div",{className:"mb-4",children:r.jsx("p",{className:"text-gray-700 line-clamp-2",children:e.reason})}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Filed by: ",(0,r.jsxs)("span",{className:"font-medium",children:[e.filedBy.slice(0,6),"...",e.filedBy.slice(-4)]})]}),(0,r.jsxs)("p",{className:"mt-1",children:["Filed ",(0,n.Z)(new Date(1e3*Number(e.filedAt)),{addSuffix:!0})]})]}),e.isResolved&&e.resolvedAt>0n&&(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"font-medium",children:"Resolved"}),r.jsx("p",{className:"text-xs mt-1",children:(0,n.Z)(new Date(1e3*Number(e.resolvedAt)),{addSuffix:!0})})]})]})]})}var c=t(95224);function u({escrowIds:e}){let{address:s}=(0,i.R)(),t=(0,c.x)(),[n,d]=(0,l.useState)([]),[u,x]=(0,l.useState)(!0),[p,m]=(0,l.useState)(null);if(44787===t?a.$Y.alfajores:a.$Y.celo,u)return r.jsx("div",{className:"p-6 bg-white rounded-lg shadow-md",children:(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded"})]})});if(0===n.length)return(0,r.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dispute History"}),(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600",children:"No disputes found"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Disputes you file or are involved in will appear here"})]})]});let g=n.filter(e=>!e.isResolved),h=n.filter(e=>e.isResolved);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Dispute History"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[g.length," active, ",h.length," resolved"]})]}),g.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Active Disputes"}),r.jsx("div",{className:"space-y-4",children:g.map(e=>r.jsx(o,{dispute:e,onClick:()=>m(e)},e.disputeId.toString()))})]}),h.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Resolved Disputes"}),r.jsx("div",{className:"space-y-4",children:h.map(e=>r.jsx(o,{dispute:e,onClick:()=>m(e)},e.disputeId.toString()))})]}),p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Dispute Details"}),r.jsx("button",{onClick:()=>m(null),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),r.jsx(o,{dispute:p})]})})]})}var x=t(22634),p=t(83010),m=t(15327);function g({escrowId:e,bookingId:s,onSuccess:t,onCancel:n}){let{address:a}=(0,i.R)(),{fileDispute:d,hash:o,isPending:c}=(0,x.nz)(),[u,g]=(0,l.useState)(""),[h,b]=(0,l.useState)(p.kq.Other),[f,v]=(0,l.useState)(null),[j,y]=(0,l.useState)(""),[N,w]=(0,l.useState)(!1),[k,q]=(0,l.useState)(null),{isLoading:D,isSuccess:S}=(0,m.A)({hash:o}),C=async t=>{if(t.preventDefault(),q(null),!a){q("Please connect your wallet");return}if(!u.trim()){q("Please provide a reason for the dispute");return}try{let t="0x0000000000000000000000000000000000000000000000000000000000000000";if(f){w(!0);let e=await (0,p.O_)(f,h);t=(0,p.VO)(e),w(!1)}else(h===p.kq.CheckInTimestamp||h===p.kq.CheckOutTimestamp)&&(t="0x"+BigInt(Math.floor(Date.now()/1e3)).toString(16).padStart(64,"0"));await d(e,s,u,t,h)}catch(e){q(e.message||"Failed to file dispute"),w(!1)}};return S?(0,r.jsxs)("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Dispute Filed Successfully"}),r.jsx("p",{className:"text-green-700",children:"Your dispute has been filed and is being reviewed."}),t&&r.jsx("button",{onClick:()=>t(BigInt(0)),className:"mt-4 text-green-600 underline",children:"View Dispute"})]}):(0,r.jsxs)("form",{onSubmit:C,className:"space-y-6 p-6 bg-white rounded-lg shadow-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"File a Dispute"}),k&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-800",children:k})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"reason",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reason for Dispute ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"reason",value:u,onChange:e=>g(e.target.value),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the issue with this booking...",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"evidenceType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Evidence Type"}),r.jsx("select",{id:"evidenceType",value:h,onChange:e=>b(Number(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Object.values(p.kq).filter(e=>!isNaN(Number(e))).map(e=>r.jsx("option",{value:e,children:(0,p.gJ)(Number(e))},e))})]}),(h===p.kq.Image||h===p.kq.Video||h===p.kq.Document)&&(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"evidenceFile",className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Evidence"}),r.jsx("input",{id:"evidenceFile",type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0],t=(0,p.mC)(h,s,j);if(!t.valid){q(t.error||"Invalid evidence");return}v(s),q(null)}},accept:h===p.kq.Image?"image/*":h===p.kq.Video?"video/*":"application/pdf,application/msword,.doc,.docx",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),f&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",f.name," (",(f.size/1024/1024).toFixed(2)," MB)"]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"evidenceDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Evidence Description"}),r.jsx("textarea",{id:"evidenceDescription",value:j,onChange:e=>y(e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what this evidence shows..."})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx("button",{type:"submit",disabled:c||D||N||!a,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium",children:N?"Uploading Evidence...":c||D?"Filing Dispute...":"File Dispute"}),n&&r.jsx("button",{type:"button",onClick:n,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})}function h(){let{address:e,isConnected:s}=(0,i.R)(),[t,n]=(0,l.useState)(!1),[a,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(null);return s?r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dispute Resolution"}),r.jsx("button",{onClick:()=>n(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"File New Dispute"})]}),t&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Escrow ID"}),r.jsx("input",{type:"number",placeholder:"Enter escrow ID",onChange:e=>d(e.target.value?BigInt(e.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Booking ID"}),r.jsx("input",{type:"number",placeholder:"Enter booking ID",onChange:e=>c(e.target.value?BigInt(e.target.value):null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),a&&o&&r.jsx(g,{escrowId:a,bookingId:o,onSuccess:()=>{n(!1),d(null),c(null)},onCancel:()=>{n(!1),d(null),c(null)}})]}),r.jsx(u,{})]})}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"p-6 bg-yellow-50 border border-yellow-200 rounded-lg text-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Wallet Not Connected"}),r.jsx("p",{className:"text-yellow-700",children:"Please connect your wallet to view and file disputes."})]})})})}},3918:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Users\MSI\Desktop\walletconnect\CarIn\frontend\app\disputes\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,2737,7252,7311,3078],()=>t(90022));module.exports=r})();